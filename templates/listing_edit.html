{% extends "base.html" %}
{% block content %}
<h2>Edit listing</h2>
{% if error %}<div>{{ error }}</div>{% endif %}
<form method="post">
  <input type="hidden" name="csrf_token" value="{{ session.csrf_token }}">
  <p>
    <label>Title</label><br>
    <input type="text" name="title" value="{{ row['title'] }}" maxlength="80" required>
  </p>
  <p>
    <label>Location</label><br>
    <input type="text" name="location" value="{{ row['location'] }}" maxlength="80" required>
  </p>
  <p>
    <label>Price (EUR)</label><br>
    <input type="number" name="price_eur" value="{{ row['price_eur'] }}" min="1" required>
  </p>
  <p>
    <label>Description</label><br>
    <textarea name="description" rows="6" maxlength="2000" required>{{ row['description'] }}</textarea>
  </p>
  <fieldset>
    <legend>Categories</legend>
    {% set chosen = selected if selected is defined else [] %}
    {% for c in cats %}
    <label style="display:block">
      <input type="checkbox" name="category_ids" value="{{ c['id'] }}" {% if c['id'] in chosen %}checked{% endif %}> {{ c['name'] }}
    </label>
    {% endfor %}
  </fieldset>
  <p><button type="submit">Save</button></p>
</form>

<section>
  <h3>Pictures</h3>
  <p>Picture upload will be added later.</p>
</section>
{% endblock %}